<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <link rel="icon" href="/favicon.ico" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Vite App</title>
    </head>

    <body>
        <div>···</div>
        <div id="app"></div>

        <script type="module" src="/src/main.ts"></script>
        <script type="module" src="./src/_test.js"></script>
    </body>
    <script>
        // 暴力版本
        var trap = function (height) {
            if (!Array.isArray(height)) return -1;
            const result = new Array(height.length).fill(0); // 每个柱子能接的雨水
            const leftMaxArr = new Array(height.length).fill(0); // 索引对应柱子左侧的最大值列表
            const rightMaxArr = new Array(height.length).fill(0); // 索引对应柱子右侧的最大值列表
            const len = height.length;
            let max = height[0];
            for (let i = 1; i < len; i++) {
                leftMaxArr[i] = Math.max(height[i], max);
                max = leftMaxArr[i]; // 计算当前柱子左侧最大值，从左往右开始遍历，默认第一个，如果有更大的则 max 为更大的值
            }
            max = height[len - 1];
            for (let i = len - 2; i >= 0; i--) {
                rightMaxArr[i] = Math.max(height[i], max);
                max = rightMaxArr[i]; // 计算当前柱子右侧最大值，从右往左开始遍历，默认最后一个，如果有更大的则 max 为更大的值
            }
            for (let i = 1; i < len; i++) {
                const res = Math.min(leftMaxArr[i], rightMaxArr[i]) - height[i]; // 找到左右最小的，计算当前柱子能接的雨水
                result[i] = res < 0 ? 0 : res; // 如果是负数，说明接水为 0
            }
            return result.reduce((count, cur) => count + cur);
        };
        console.log(trap([0, 1, 0, 2, 1, 0, 1, 3, 2, 1, 2, 1]));
    </script>
</html>

